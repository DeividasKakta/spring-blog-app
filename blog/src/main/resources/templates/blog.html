<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/mainLayout :: head(title=#{blog.title})"></head>
<body>

<header th:replace="fragments/mainLayout :: header"></header>

<div class="container">
<!--    <article class="blog-post">-->
<!--        <h2 class="blog-post-title" th:text="${blog.title}">Blog title</h2>-->
<!--        <p class="blog-post-meta" th:text="${blog.date} + ' by Author'">December 23, 2013 by <a href="#">Author</a></p>-->
<!--        <p th:text="${blog.content}">Content</p>-->
<!--    </article>-->

    <div>
        <form class="row" method="POST" th:object="${comment}">
            <p class="fw-bold" th:text="#{create.comment.title}"></p>
            <div class="col-4">
                <textarea class="form-control"
                          rows="3"
                          th:placeholder="#{create.comment.placeholder}"
                          th:field="*{message}"
                          th:classappend=" ${#fields.hasErrors('message') ? 'is-invalid' : ''}"
                          aria-describedby="messageValidation">
                </textarea>
                <div class="invalid-feedback"
                     id="messageValidation"
                     th:if="${#fields.hasErrors('message')}"
                     th:errors="*{message}">ERROR</div>
                <button class="btn btn-outline-secondary my-2"
                        type="submit"
                        th:text="#{create.comment.submit}">
                </button>
            </div>
        </form>
    </div>


    <div class="row">
        <ul class="list-group col-6">
            <li class="list-group-item align-items-start"
                th:each="comm : ${comments}">

                    <div class="d-flex justify-content-between">
                        <div class="fw-bold" th:text="${comm.username}">Author</div>
                        <div>
                            <a class="text-decoration-none text-success fs-5"
                               th:href="@{/blogs/{blogId}(blogId=${blog.id})}">
                                <i class="fas fa-edit"></i>
                            </a>

                            <a class="text-decoration-none text-danger fs-5"
                               th:href="@{/blogs/{blogId}/comments/delete(blogId=${blog.id}, id=${comm.id})}">
                                <i class="fas fa-trash-alt"></i>
                            </a>
                        </div>
                    </div>

                    <p th:text="${comm.message}">Comment text</p>

            </li>
        </ul>
    </div>
</div>


</body>
</html>